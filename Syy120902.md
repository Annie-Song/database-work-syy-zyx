**网上书店项目 - 数据库接口约定（请确认）**

为了我们并行开发顺利，以下是数据库接口的关键约定，请今天确认：

### **1. 技术栈确认**
- 数据库：**MySQL 8.0**
- 连接方式：**JDBC**（请使用最新MySQL Connector/J）
- 编码：全部使用 **UTF-8**

### **2. 数据库连接信息**
```
主机：localhost
端口：3306
数据库名：bookstore_db
用户名：bookstore_user
密码：bookstore_123  （建议你本地也设这个，方便测试）
```

### **3. 关键接口约定**
**JSON格式（必须确认）**：
- 订单商品列表使用 **JSON数组** 传递
- 格式：`[{"book_id":1, "quantity":2}, {"book_id":3, "quantity":1}]`
- 问：Java端处理JSON是否方便？是否需要我改用其他格式？

**分页参数**：
- `page`：**从1开始**（第1页）
- `page_size`：默认10条
- 返回值：我会返回`total_count`字段（总记录数）

**日期时间**：
- 所有时间字段用数据库`TIMESTAMP`类型
- Java端用`String`接收，格式：`"2024-01-15 14:30:45"`

**密码加密**：
- 使用 **SHA-256 + salt** 加密
- 我提供的密码加密SQL函数：
  ```sql
  -- 加密示例
  SELECT SHA2(CONCAT('salt_', '用户密码'), 256) AS password_hash;
  ```
- 你调用注册接口时，请先加密密码再传给我

### **4. 错误处理标准**
我会返回统一的错误码，请你在界面显示对应提示：

| 错误码 | 含义 | 用户提示 |
|--------|------|----------|
| 0 | 成功 | 操作成功 |
| 1001 | 用户名已存在 | 用户名已被注册 |
| 1002 | 登录失败 | 用户名或密码错误 |
| 2001 | 库存不足 | 库存不足，请减少数量 |
| 2002 | 余额不足 | 账户余额不足 |
| 2003 | 信用等级不够 | 信用等级不足，请先充值 |
| 3001 | 订单不存在 | 订单不存在 |
| 9999 | 系统错误 | 系统繁忙，请稍后重试 |

**接口返回示例**：
```json
{
  "success": 0,  // 或错误码
  "message": "操作成功",
  "data": {...}  // 成功时返回的数据
}
```

### **5. 今日交付物**
我今天会给你：
1. **数据库初始化脚本**（创建所有表、视图、空壳存储过程）
2. **测试数据SQL**（包含3个测试用户、10本测试图书）
3. **接口文档V1.0**（所有存储过程的调用说明）


### **接口文档**
见InterfaceDesignSyy120901.md



